import type { Meta, StoryObj } from '@storybook/react';
import { View } from 'react-native';
import { ResponsiveSvg } from './ResponsiveSvg';

// Sample SVG content for demonstration
const sampleSvgContent = `
<svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
  <circle cx="100" cy="100" r="80" fill="#4CAF50" stroke="#2E7D32" stroke-width="4"/>
  <circle cx="70" cy="80" r="8" fill="#1B5E20"/>
  <circle cx="130" cy="80" r="8" fill="#1B5E20"/>
  <path d="M 70 130 Q 100 160 130 130" stroke="#1B5E20" stroke-width="4" fill="none" stroke-linecap="round"/>
  <text x="100" y="40" text-anchor="middle" fill="#1B5E20" font-family="Arial" font-size="16" font-weight="bold">
    Happy SVG!
  </text>
</svg>
`;

const complexSvgContent = `
<svg width="300" height="200" viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#87CEEB;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#98FB98;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Sky background -->
  <rect width="300" height="200" fill="url(#skyGradient)"/>
  
  <!-- Sun -->
  <circle cx="250" cy="50" r="25" fill="#FFD700" stroke="#FFA500" stroke-width="2"/>
  
  <!-- Mountains -->
  <polygon points="0,150 50,100 100,120 150,80 200,100 250,90 300,110 300,200 0,200" fill="#8B4513"/>
  
  <!-- Trees -->
  <rect x="80" y="140" width="8" height="20" fill="#8B4513"/>
  <circle cx="84" cy="135" r="12" fill="#228B22"/>
  
  <rect x="180" y="135" width="8" height="25" fill="#8B4513"/>
  <circle cx="184" cy="130" r="15" fill="#228B22"/>
  
  <!-- Clouds -->
  <ellipse cx="80" cy="40" rx="20" ry="12" fill="white" opacity="0.8"/>
  <ellipse cx="95" cy="35" rx="25" ry="15" fill="white" opacity="0.8"/>
  <ellipse cx="110" cy="40" rx="20" ry="12" fill="white" opacity="0.8"/>
</svg>
`;

const iconSvgContent = `
<svg width="100" height="100" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2Z" fill="#2196F3" stroke="#1976D2" stroke-width="1"/>
  <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;

const meta = {
  title: 'ResponsiveSvg',
  component: ResponsiveSvg,
  args: {
    svgContent: sampleSvgContent,
    title: 'Sample SVG',
    backgroundColor: '#ffffff',
    preserveAspectRatio: true,
  },
  decorators: [
    Story => (
      <View style={{ padding: 16, flex: 1 }}>
        <Story />
      </View>
    ),
  ],
} satisfies Meta<typeof ResponsiveSvg>;

export default meta;

type Story = StoryObj<typeof meta>;

export const Basic: Story = {
  args: {
    svgContent: sampleSvgContent,
    title: 'Basic SVG Example',
  },
};

export const ComplexSvg: Story = {
  args: {
    svgContent: complexSvgContent,
    title: 'Complex Landscape SVG',
    backgroundColor: '#f8f9fa',
  },
};

export const IconSvg: Story = {
  args: {
    svgContent: iconSvgContent,
    title: 'Icon SVG',
    width: 80,
    height: 80,
  },
};

export const CustomDimensions: Story = {
  args: {
    svgContent: sampleSvgContent,
    title: 'Custom Size (150x150)',
    width: 150,
    height: 150,
  },
};

export const WithMaxWidth: Story = {
  args: {
    svgContent: complexSvgContent,
    title: 'With Max Width (200px)',
    maxWidth: 200,
  },
};

export const NoAspectRatio: Story = {
  args: {
    svgContent: sampleSvgContent,
    title: 'No Aspect Ratio Preservation',
    preserveAspectRatio: false,
    width: 300,
    height: 150,
  },
};

export const DarkTheme: Story = {
  args: {
    svgContent: `
      <svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <circle cx="100" cy="100" r="80" fill="#BB86FC" stroke="#6200EE" stroke-width="4"/>
        <circle cx="70" cy="80" r="8" fill="#3700B3"/>
        <circle cx="130" cy="80" r="8" fill="#3700B3"/>
        <path d="M 70 130 Q 100 160 130 130" stroke="#3700B3" stroke-width="4" fill="none" stroke-linecap="round"/>
        <text x="100" y="40" text-anchor="middle" fill="#3700B3" font-family="Arial" font-size="16" font-weight="bold">
          Dark Mode!
        </text>
      </svg>
    `,
    title: 'Dark Theme SVG',
    backgroundColor: '#121212',
  },
};

export const RemoteSvg: Story = {
  args: {
    svgUri: 'https://dev.w3.org/SVG/tools/svgweb/samples/svg-files/tiger.svg',
    title: 'Remote SVG (Tiger)',
    maxWidth: 300,
  },
};

export const YourCustomSvg: Story = {
  args: {
    svgContent: `<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="640.000000pt" height="426.000000pt" viewBox="0 0 640.000000 426.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.14, written by Peter Selinger 2001-2017
</metadata>
<g transform="translate(0.000000,426.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M138 4225 c14 -30 18 -33 24 -18 6 17 7 17 7 1 1 -10 6 -18 12 -18 5
0 8 -4 4 -9 -3 -5 -1 -12 5 -16 6 -4 8 -11 4 -16 -3 -5 0 -16 6 -24 7 -8 9
-15 4 -15 -5 0 2 -7 14 -16 12 -8 20 -20 16 -25 -7 -13 24 -49 43 -49 7 0 13
-9 13 -19 0 -18 15 -35 32 -36 12 0 21 -15 9 -15 -7 0 -9 -4 -6 -10 3 -5 -2
-10 -11 -10 -15 0 -16 -2 -2 -17 9 -10 19 -33 23 -52 5 -23 10 -30 15 -20 7
11 12 10 28 -4 20 -19 45 -6 35 19 -3 8 -1 14 3 15 5 0 16 2 25 4 9 1 16 -3
16 -11 0 -11 -4 -11 -16 -2 -10 8 -9 4 3 -9 10 -13 23 -20 29 -16 5 3 7 2 4
-4 -6 -9 99 -121 108 -115 3 1 5 0 5 -3 0 -3 0 -10 0 -16 0 -6 -34 21 -76 60
-65 59 -80 69 -96 60 -16 -9 -17 -13 -6 -27 7 -9 8 -13 2 -9 -6 3 -20 0 -30
-8 -17 -13 -17 -16 -4 -26 11 -8 12 -12 3 -15 -10 -4 -10 -10 0 -25 6 -10 16
-19 21 -19 4 0 3 7 -4 15 -25 30 -4 23 33 -11 43 -40 48 -52 12 -28 -14 9 -28
14 -32 10 -3 -3 -2 -6 4 -6 6 0 14 -7 17 -16 6 -15 4 -15 -19 0 -14 9 -25 12
-25 6 0 -5 5 -10 10 -10 14 0 12 -18 -2 -23 -7 -2 -3 -2 10 0 17 3 22 -1 22
-20 0 -15 13 -31 41 -49 l40 -26 -30 -7 c-17 -3 -35 -4 -40 -1 -5 4 -12 2 -16
-4 -3 -5 3 -10 14 -10 11 0 28 -11 37 -26 10 -14 23 -23 31 -20 8 3 11 2 8 -3
-3 -5 -1 -12 5 -16 5 -3 10 -1 10 4 0 6 4 11 9 11 5 0 7 -9 4 -20 -4 -15 0
-20 16 -20 12 0 18 -5 15 -13 -3 -8 9 -18 29 -25 44 -16 57 -15 34 2 -10 8
-14 17 -9 20 5 3 22 -8 37 -24 31 -32 59 -42 31 -11 -11 12 -14 21 -7 26 6 3
11 1 11 -5 0 -6 5 -8 12 -4 7 4 8 3 4 -4 -8 -13 30 -36 44 -27 6 3 15 3 21 -1
8 -4 7 -9 -2 -15 -7 -4 -10 -11 -6 -15 3 -4 13 -1 22 6 10 8 15 9 15 1 0 -6
-4 -11 -10 -11 -5 0 -10 -4 -10 -10 0 -5 4 -10 10 -10 18 0 48 -33 43 -46 -3
-9 2 -14 13 -14 18 -1 18 -1 0 -15 -23 -17 -14 -20 15 -5 14 8 19 7 19 -1 0
-8 13 -10 40 -6 54 7 71 -18 41 -58 -12 -15 -9 -14 11 3 l26 24 11 -21 c7 -12
17 -21 23 -21 6 0 1 11 -12 25 -13 14 -21 27 -18 30 2 3 22 -13 43 -36 30 -33
35 -43 24 -51 -11 -8 -10 -9 4 -4 21 7 60 -11 52 -24 -3 -5 -1 -11 4 -14 25
-16 0 30 -30 55 -19 15 -30 31 -26 35 4 4 28 -12 54 -37 25 -24 43 -39 40 -34
-3 6 -2 17 3 25 7 11 11 11 24 1 9 -7 13 -18 9 -24 -3 -6 -1 -7 6 -3 6 4 20 2
29 -6 15 -11 15 -11 5 2 -6 8 -12 19 -13 24 -2 10 20 26 35 26 6 0 4 -4 -3 -8
-9 -6 -6 -12 12 -22 21 -11 27 -10 39 1 7 8 12 20 9 27 -2 6 1 12 7 12 6 0 11
-5 11 -11 0 -5 5 -7 10 -4 6 3 10 0 10 -8 0 -8 9 -17 20 -20 11 -3 20 -13 20
-22 0 -24 20 -7 21 18 0 12 3 16 6 10 2 -7 11 -13 19 -13 8 0 14 -7 14 -15 0
-8 6 -15 14 -15 8 0 16 -6 19 -12 3 -8 9 -3 15 12 9 22 11 22 12 5 1 -27 26
-59 35 -46 3 6 -1 14 -9 17 -9 3 -16 10 -16 15 0 13 43 6 59 -9 10 -10 16 -10
27 -1 11 9 18 8 32 -5 23 -20 37 -9 15 12 -30 31 8 25 40 -6 18 -16 38 -27 45
-25 7 3 12 -3 12 -15 0 -11 8 -22 19 -25 14 -3 18 -1 14 9 -6 16 13 19 22 4 4
-6 11 -8 16 -5 5 4 12 -1 15 -9 3 -9 14 -16 25 -16 10 0 23 -9 29 -20 13 -23
40 -27 40 -5 0 8 5 15 10 15 6 0 10 -6 10 -14 0 -17 41 -29 54 -16 5 5 20 3
36 -5 15 -8 30 -12 33 -9 3 3 16 0 29 -6 l23 -12 -24 23 c-15 14 -26 19 -28
12 -5 -14 -33 -6 -33 9 0 6 7 8 15 4 18 -7 20 5 3 22 -29 29 7 8 40 -23 33
-31 82 -50 67 -25 -4 6 -10 8 -14 6 -10 -6 -8 40 2 50 4 5 5 1 2 -8 -4 -11 6
-26 34 -48 22 -18 38 -37 34 -43 -3 -6 -1 -7 6 -3 6 4 19 2 27 -5 8 -7 14 -8
13 -3 -3 19 2 28 9 17 5 -9 13 -1 24 22 8 19 12 32 7 29 -5 -3 -6 2 -2 11 4
12 8 13 13 5 4 -7 13 -9 19 -6 6 4 8 13 4 19 -4 7 0 6 10 -2 16 -13 14 -36 -3
-26 -4 3 -14 -3 -21 -13 -13 -15 -12 -16 3 -4 13 10 18 10 24 1 5 -9 10 -5 16
11 7 18 4 28 -14 47 -12 13 -28 22 -36 21 -20 -4 -24 29 -5 37 9 3 18 3 21 0
3 -3 -1 -5 -9 -5 -8 -1 1 -14 20 -30 37 -31 53 -33 30 -3 -13 16 -12 17 4 4
10 -8 16 -20 13 -27 -5 -13 24 -44 40 -44 5 0 2 5 -6 10 -13 9 -13 11 0 20 8
5 20 10 25 10 6 0 5 -4 -2 -8 -16 -10 -11 -37 12 -62 24 -27 62 -49 50 -29 -6
9 -3 10 11 5 15 -6 16 -5 7 5 -7 7 -20 13 -30 14 -24 1 -43 13 -43 26 0 6 3 8
8 6 4 -3 13 1 20 9 12 13 8 18 -11 15 -5 -1 -6 3 -3 8 4 5 -5 18 -19 29 -14
11 -22 23 -17 26 5 3 26 -13 48 -35 21 -21 56 -52 79 -67 22 -15 43 -31 47
-37 5 -6 8 -5 8 3 0 6 10 12 22 12 32 0 16 10 -22 13 -58 4 -44 22 15 19 48
-3 55 -1 55 15 1 14 4 12 16 -9 15 -29 38 -36 49 -17 4 6 14 8 24 4 12 -5 13
-3 4 5 -8 8 -17 9 -29 2 -19 -11 -44 6 -44 30 1 9 5 7 14 -4 7 -10 19 -18 26
-18 10 0 10 3 0 15 -9 10 -9 15 -1 15 6 0 11 -4 11 -8 0 -4 15 -13 33 -20 36
-13 37 -15 -47 52 -42 33 -41 48 1 19 17 -12 42 -19 66 -18 20 1 37 -2 37 -6
0 -12 -26 -18 -41 -8 -30 19 -29 8 3 -18 18 -16 38 -33 43 -39 6 -6 31 -29 56
-50 l46 -39 -49 47 c-26 26 -48 49 -48 51 0 3 12 8 27 12 15 3 31 12 35 18 4
7 13 12 20 12 7 0 13 11 13 25 0 27 29 40 48 21 7 -7 20 0 45 26 27 29 36 33
43 22 5 -8 9 -18 9 -24 0 -5 6 -3 12 3 10 10 10 14 0 21 -10 6 -10 11 3 21 12
10 18 11 28 1 9 -10 8 -11 -8 -6 -18 6 -18 5 -2 -5 20 -13 41 -4 30 13 -4 8
-1 7 9 -1 10 -8 15 -23 12 -37 -2 -13 -1 -26 4 -28 4 -3 7 9 7 27 0 38 -22 69
-42 62 -9 -4 -11 -1 -7 6 4 6 -1 17 -11 25 -11 7 -14 13 -9 13 6 0 21 -10 33
-21 31 -29 87 -33 112 -8 10 10 24 19 31 19 6 0 3 9 -7 20 -10 11 -13 20 -7
20 7 0 12 -3 12 -8 0 -12 58 -34 71 -27 6 4 9 16 6 26 -4 14 0 19 15 19 14 0
18 5 14 15 -6 17 12 14 101 -16 45 -15 52 -15 57 -3 3 9 11 12 17 8 8 -4 9 -3
5 4 -5 9 -13 9 -27 2 -14 -8 -19 -8 -17 1 2 6 -3 14 -11 17 -8 3 -11 0 -7 -7
5 -7 1 -9 -8 -5 -9 3 -16 10 -16 16 0 5 4 7 9 3 6 -3 9 4 8 15 -1 12 -16 32
-34 46 -18 14 -33 30 -33 36 0 7 13 -1 29 -16 18 -17 34 -25 42 -21 7 5 10 4
5 -3 -4 -6 21 -33 59 -63 36 -29 65 -57 65 -63 0 -5 -11 1 -24 13 -18 17 -29
21 -41 13 -13 -7 -14 -11 -6 -17 7 -4 15 -4 18 -1 3 3 12 1 19 -5 7 -6 27 -12
45 -14 31 -4 54 -15 31 -15 -7 0 -12 -3 -12 -7 0 -5 15 -7 32 -6 45 2 45 2 28
13 -11 7 -8 8 13 6 15 -1 35 -13 43 -24 17 -25 3 -30 -16 -7 -7 8 -17 15 -22
15 -6 0 -4 -7 3 -16 12 -15 11 -16 -11 -10 -19 6 -21 5 -10 -3 8 -6 22 -8 31
-5 9 2 24 -2 32 -11 20 -19 33 -20 17 0 -15 18 1 20 18 3 9 -9 12 -8 12 5 0 9
-6 17 -12 17 -7 0 -22 13 -32 28 -11 15 -13 22 -6 15 10 -9 18 -9 34 -1 19 10
20 10 7 -6 -18 -22 -8 -31 19 -16 13 7 37 9 59 5 l36 -7 -27 29 c-39 40 -35
48 9 19 39 -27 55 -27 33 -1 -12 14 -10 15 13 10 34 -9 81 19 73 42 -5 12 -4
13 7 5 8 -7 17 -9 20 -5 4 3 -2 12 -13 20 -11 8 -20 21 -20 30 0 14 2 14 17 1
38 -32 46 -28 11 5 -21 19 -38 40 -38 48 0 10 2 11 8 2 5 -8 13 -9 22 -3 8 6
27 10 43 10 16 0 27 5 27 13 0 9 10 12 28 10 15 -2 34 1 42 7 13 9 13 11 0 20
-13 8 -12 10 3 10 10 0 16 4 12 9 -3 5 -1 12 5 16 6 4 8 11 5 16 -4 5 -1 9 4
9 6 0 11 -4 11 -10 0 -5 5 -10 11 -10 5 0 7 5 4 11 -4 6 3 13 15 16 22 6 21 6
-6 19 l-29 13 30 -6 c28 -6 29 -5 16 11 -13 16 -12 17 10 14 13 -2 24 2 24 7
0 6 -6 9 -12 9 -24 -3 -13 22 15 34 24 10 24 11 2 5 -23 -5 -24 -5 -10 13 8
10 15 20 15 21 1 2 11 -6 23 -17 25 -24 27 -21 10 15 -8 19 -17 25 -31 21 -14
-3 -17 -2 -9 6 5 5 26 10 46 10 20 0 34 4 31 8 -9 14 46 21 63 8 13 -11 14
-11 7 1 -6 11 -4 13 8 8 41 -17 52 -19 32 -6 -11 7 -29 21 -39 31 -16 15 -17
18 -4 18 9 0 21 -7 28 -15 18 -22 27 -19 38 13 l10 27 2 -25 2 -25 10 28 c11
32 38 36 45 6 4 -16 8 -17 14 -7 7 10 9 10 9 -2 0 -13 1 -13 10 0 9 13 11 13
19 0 6 -8 13 -11 17 -7 11 11 -18 38 -35 32 -8 -3 -12 -3 -8 1 4 4 2 13 -5 21
-8 11 -7 12 6 7 10 -4 16 -1 16 7 0 10 3 10 12 1 14 -14 32 -16 23 -3 -3 5 -1
12 4 16 10 5 7 -27 -3 -44 -9 -13 19 -32 38 -25 10 4 16 1 16 -9 0 -9 4 -18 9
-21 12 -8 8 27 -4 36 -5 4 -19 5 -30 2 -19 -6 -19 -6 -1 8 23 18 66 2 59 -22
-4 -12 -3 -12 5 -1 8 11 10 11 15 0 3 -9 6 -10 6 -2 1 6 -9 19 -21 27 -12 9
-19 19 -15 23 4 3 16 -3 27 -15 23 -24 40 -29 40 -11 0 6 9 9 19 6 12 -3 22 1
26 11 5 14 7 14 15 2 5 -8 6 -18 3 -24 -3 -5 -1 -6 4 -3 6 4 16 20 23 37 13
31 24 37 35 20 3 -6 14 -10 23 -10 13 1 9 7 -12 25 -17 13 -34 21 -39 18 -6
-3 -7 -1 -3 5 3 6 -3 16 -15 22 -11 7 -18 14 -16 17 3 3 21 -6 39 -20 18 -14
45 -30 59 -35 26 -10 51 -3 50 14 0 5 5 9 12 10 6 0 24 4 40 9 21 6 25 10 17
21 -10 10 -7 11 14 1 l25 -12 -22 -12 c-21 -11 -21 -11 5 -10 14 1 24 5 21 10
-2 4 2 7 9 7 7 0 1 8 -14 18 -35 21 -35 27 1 27 16 1 27 -3 25 -7 -3 -5 -10
-6 -15 -3 -5 4 -9 4 -9 1 0 -3 9 -10 20 -16 16 -8 20 -8 18 2 -2 7 3 12 10 11
21 -5 13 6 -15 21 -20 11 -23 15 -10 16 9 0 35 -11 56 -24 26 -17 38 -20 38
-11 0 8 -3 14 -6 13 -18 -2 -31 3 -31 13 0 6 5 7 13 2 24 -15 47 -14 40 2 -4
13 -1 14 22 5 43 -17 83 -12 95 10 10 18 13 19 26 5 9 -8 23 -14 32 -14 15 1
15 2 0 6 -24 6 -23 23 2 23 11 0 20 4 20 10 0 5 12 8 28 6 15 -2 20 -1 12 1
-27 9 -35 22 -21 36 10 10 12 9 9 -3 -4 -22 52 -27 64 -6 6 10 23 16 49 16 22
0 56 7 77 16 48 22 70 24 76 7 8 -21 25 -15 19 7 -3 11 0 20 6 20 6 0 11 -10
11 -22 0 -18 2 -20 9 -8 6 8 7 18 4 23 -6 11 29 37 40 30 5 -3 3 -9 -4 -14 -7
-4 -10 -12 -5 -16 4 -4 14 1 22 12 9 12 18 16 22 10 9 -13 85 -13 95 0 4 6 11
4 17 -5 9 -13 11 -13 20 0 9 13 11 13 20 0 8 -12 10 -10 11 10 1 17 3 20 6 7
2 -9 9 -14 14 -11 6 3 17 -2 25 -12 9 -11 13 -14 10 -9 -2 6 0 17 5 25 7 12
10 11 15 -7 9 -32 43 -31 37 1 -6 30 16 46 24 17 3 -12 10 -21 15 -21 5 0 6
-5 2 -12 -4 -7 -3 -8 4 -4 7 4 12 15 12 24 1 16 2 16 14 0 19 -25 24 -23 32
17 8 47 24 45 24 -3 0 -44 26 -56 28 -13 3 71 13 85 25 36 4 -15 5 -14 6 7 0
15 5 29 9 32 5 3 10 37 11 76 l2 70 -822 0 c-781 0 -821 -1 -808 -17 13 -17
13 -17 -7 0 -18 15 -46 17 -254 17 -220 0 -232 -1 -219 -17 13 -17 13 -17 -7
-1 -19 17 -131 18 -1868 18 l-1848 0 52 -60 c29 -33 48 -60 43 -59 -4 0 -30
27 -57 60 l-49 59 -158 0 c-116 0 -159 -3 -162 -12 -4 -10 -6 -10 -6 0 -1 8
-19 12 -55 12 l-54 0 16 -35z"/>
</g>
</svg>`,
    title: 'Sample 640×426 SVG',
    backgroundColor: '#f8f9fa',
    maxWidth: 400,
  },
};

export const ErrorHandling: Story = {
  args: {
    svgContent: '<svg><invalid-tag></svg>',
    title: 'Error Handling Example',
  },
};

export const NoSvgProvided: Story = {
  args: {
    title: 'No SVG Source',
    // No svgContent, svgUri, or svgSource provided
  },
};
